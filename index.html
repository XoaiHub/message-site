<!DOCTYPE html>
<html>
<head>
    <title>Message Generator</title>
    <style>
        body {
            background: black;
            color: lime;
            font-family: monospace;
            text-align: center;
            padding: 40px;
        }

        input {
            width: 80%;
            padding: 10px;
            margin: 10px;
        }

        button {
            padding: 10px 20px;
            background: lime;
            border: none;
            cursor: pointer;
        }

        img {
            max-width: 400px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h2>CREATE YOUR MESSAGE</h2>

<div id="creator">
    <input id="msgInput" placeholder="Nhập lời nhắn"><br>
    <input id="imgInput" placeholder="Link ảnh (https://...)"><br>
    <input id="musicInput" placeholder="Link nhạc mp3 (https://...)"><br>
    <button onclick="generate()">TẠO LINK</button>
    <p id="generatedLink"></p>
</div>

<div id="viewer" style="display:none;">
    <h1 id="message"></h1>
    <img id="image">
    <audio id="music" controls autoplay></audio>
</div>

<script>
    const params = new URLSearchParams(window.location.search);

    if (params.get("msg")) {
        document.getElementById("creator").style.display = "none";
        document.getElementById("viewer").style.display = "block";

        document.getElementById("message").innerText = params.get("msg");

        const img = params.get("img");
        if (img) {
            document.getElementById("image").src = img;
        }

        const music = params.get("music");
        if (music) {
            document.getElementById("music").src = music;
        }
    }

    function generate() {
        const msg = encodeURIComponent(document.getElementById("msgInput").value);
        const img = encodeURIComponent(document.getElementById("imgInput").value);
        const music = encodeURIComponent(document.getElementById("musicInput").value);

        const base = window.location.origin + window.location.pathname;
        const newLink = base + "?msg=" + msg + "&img=" + img + "&music=" + music;

        document.getElementById("generatedLink").innerHTML =
            "<a href='" + newLink + "' target='_blank'>" + newLink + "</a>";
    }
</script>

</body>
</html>
